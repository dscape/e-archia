# ============================================================================
# e-archia: create_stories migration                                       001
# author: nunojobpinto[at]gmail[dot]com                                      
# ============================================================================
class CreateStories < ActiveRecord::Migration
  # ==========================================================================
  # version UP
  # ==========================================================================
  def self.up
    # ========================================================================
    # create tables
    # ========================================================================
    create_table :stories do |t|
      t.string :title,      :limit => 256,  :null => false
      t.string :contents,   :limit => 2048, :null => false
      t.string :permalink,  :limit => 256,  :null => false
      t.timestamps
    end
    # ========================================================================
    #  make indexes
    # ========================================================================
    add_index :stories, :permalink

    # ========================================================================
    # create some data
    # ========================================================================
    Story.create(:title => "Bem-vindo ao e-archia",
    :permalink => "bem_vindo_ao_e_archia",
    :contents => "Podes apagar este artigo se ele n√£o te agradar.")
  end

  # ==========================================================================
  # version DOWN
  # ==========================================================================
  def self.down
    # ========================================================================
    # drop tables
    # ========================================================================
    drop_table :stories
  end
end